/* Glassmorphism & Glow Effects */

@keyframes pulse-glow-primary {
  0% { box-shadow: 0 0 0 0 rgba(var(--primary-rgb), 0.4); }
  70% { box-shadow: 0 0 0 6px rgba(var(--primary-rgb), 0); }
  100% { box-shadow: 0 0 0 0 rgba(var(--primary-rgb), 0); }
}

@keyframes flash-ready {
  0% { opacity: 1; text-shadow: 0 0 10px var(--warning); }
  50% { opacity: 0.7; text-shadow: none; }
  100% { opacity: 1; text-shadow: 0 0 10px var(--warning); }
}

.content {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 16px;
  overflow: hidden;
  padding: 16px;
  background: radial-gradient(circle at top right, rgba(var(--primary-rgb), 0.05), transparent 40%),
              radial-gradient(circle at bottom left, rgba(var(--secondary-rgb), 0.05), transparent 40%);
}

/* Top Section: Projects and Task Lists */
.topSection {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex-shrink: 0;
  padding-bottom: 8px;
  padding-bottom: 8px;
  /* border-bottom: 1px solid var(--glass-border); Removed to prevent shadow artifacts */
}

/* New 2-Column Section Layout */
.sectionContainer {
  display: flex;
  flex-direction: row;
  gap: 12px;
  align-items: stretch;
  min-height: 70px;
}

/* Column 1: Header & Filter */
.headerColumn {
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 130px;
  min-width: 130px;
  justify-content: center;
  padding-top: 0;
}

.sectionHeader {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: flex-start;
  border-bottom: none;
  padding-bottom: 0;
}

.sectionHeader h3 {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  text-shadow: 0 0 10px rgba(var(--primary-rgb), 0.3); /* Subtle text glow */
}

.sidebarFilter {
  width: 100%;
}

.miniInput {
  /* Override default Input styles for compact filter inputs */
  display: flex;
}

.miniInput input {
  height: 26px;
  font-size: 11px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: var(--glass-blur);
  color: var(--text-primary);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  padding: 4px 8px 4px 28px !important; /* Space for icon on left */
}

.miniInput input:focus {
  border-color: var(--primary);
  box-shadow: 
    0 0 0 1px var(--primary),
    0 0 calc(var(--glow-strength) * 0.2px) var(--glow-primary);
}

/* Column 2: Scrollable Cards */
.cardsColumn {
  flex: 1;
  display: flex;
  gap: 12px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 40px 16px; /* Increased horizontal padding to prevent left/right clipping */
  margin: -32px 0; /* Negative margin to counteract padding */
  align-items: center;
  scrollbar-width: none; 
  position: relative;
  z-index: 1; 
  -ms-overflow-style: none;
}

.cardsColumn::-webkit-scrollbar {
  display: none;
}

/* Horizontal Project Card */
.projectCard {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 4px 12px;
  cursor: pointer;
  transition: all calc(var(--duration-normal) * 1s) cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 2px;
  min-width: 140px;
  width: auto;
  height: 60px;
  position: relative;
  overflow: visible;
  box-shadow: var(--glass-shadow);
  transform-style: preserve-3d;
}

.projectCard:hover {
  border-color: var(--primary);
  transform: translateY(-2px) scale(1.02)
              rotateX(calc(var(--parallax-strength, 0) * 0.015deg)) 
              rotateY(calc(var(--parallax-strength, 0) * 0.015deg));
  box-shadow: 
    var(--glass-shadow),
    0 0 calc(var(--glow-strength, 50) * 0.2px) var(--glow-primary);
  background: rgba(var(--primary-rgb), 0.1);
}

.projectCard.active {
  background: rgba(var(--primary-rgb), 0.15);
  border-color: var(--primary);
  box-shadow: 
    var(--glow-primary);
}

/* Row 1: Project Name */
.projectName {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  line-height: 1.2;
}

/* Row 2: Stats (Ready + Lists) */
.projectStats {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.statItem {
  font-size: 10px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 4px;
  font-weight: 500;
}

/* Row 3: Progress */
.projectProgress {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 6px;
  width: 100%;
}

.progressBar {
  flex: 1;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

:global([data-theme="light"]) .progressBar {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.progressFill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), var(--primary-light));
  border-radius: 2px;
  transition: width 0.5s ease-out;
  box-shadow: 0 0 8px var(--primary);
}

.progressText {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-secondary);
  min-width: 24px;
  text-align: right;
}

/* Task List Card (Horizontal & Flat) */
.taskListCard {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
  transition: all calc(var(--duration-normal) * 1s) cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 180px;
  width: auto;
  height: 60px;
  justify-content: center;
  box-shadow: var(--glass-shadow);
  transform-style: preserve-3d;
}

.taskListCard:hover {
  border-color: var(--primary);
  transform: translateY(-2px) scale(1.02)
              rotateX(calc(var(--parallax-strength, 0) * 0.015deg)) 
              rotateY(calc(var(--parallax-strength, 0) * 0.015deg));
  box-shadow: 
    var(--glass-shadow),
    0 0 calc(var(--glow-strength, 50) * 0.2px) var(--glow-primary);
  background: rgba(var(--primary-rgb), 0.1);
}

.taskListCard.active {
  background: rgba(var(--primary-rgb), 0.15);
  border-color: var(--primary);
  box-shadow: var(--glow-primary);
}

.itemName {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
}

.taskListMetaRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  font-size: 10px;
}

.readyCount {
  color: var(--warning);
  font-weight: 600;
  white-space: nowrap;
  animation: flash-ready 2s infinite; /* Flashing indicator */
}

.taskListProgress {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
  min-width: 0;
}

.taskListProgressBar {
  flex: 1;
  height: 3px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
  min-width: 30px;
}

:global([data-theme="light"]) .taskListProgressBar {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.taskListDoneText {
  color: var(--text-tertiary);
  font-size: 9px;
  white-space: nowrap;
}

.emptyStateSmall {
  font-size: 12px;
  color: var(--text-tertiary);
  font-style: italic;
  text-align: center;
  padding: 12px;
}

/* Bottom Section: Sidebar + Main Content */
.bottomSection {
  display: flex;
  flex: 1;
  gap: 24px;
  overflow: hidden;
}

/* Sidebar */
.sidebar {
  width: 280px;
  min-width: 280px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow-y: auto; /* Ready tasks scroll independently */
  padding-right: 12px;
  border-right: 1px solid var(--glass-border);
  min-height: 0; /* Important for flex child to scroll */
}

.sidebarSection {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Ready Tasks in Sidebar */
.readyTasksList {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.readyTaskItem {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-left: 3px solid var(--warning);
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  transition: all calc(var(--duration-normal) * 1s) cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--glass-shadow);
  transform-style: preserve-3d;
}

.readyTaskItem:hover {
  transform: translateX(4px)
              rotateX(calc(var(--parallax-strength, 0) * 0.015deg)) 
              rotateY(calc(var(--parallax-strength, 0) * 0.015deg));
  box-shadow: 
    var(--glass-shadow),
    0 0 calc(var(--glow-strength, 50) * 0.2px) var(--glow-primary);
  border-color: var(--primary);
}

.readyTaskHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 6px;
}

.readyTaskHeader h4 {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.3;
}

.readyTaskMeta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.priorityBadge {
  font-size: 9px;
  font-weight: 700;
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
  box-shadow: 0 0 8px rgba(0,0,0,0.2);
}

.readyTaskDesc {
  font-size: 11px;
  color: var(--text-secondary);
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Main Content */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow: hidden; /* Prevent main from scrolling */
  min-height: 0; /* Important for flex child to scroll */
}

.mainHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  flex-shrink: 0;
}
.toolbarOverride {
  flex: 1;
}

.sectionTitle {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  text-shadow: 0 0 15px rgba(var(--primary-rgb), 0.4); /* Stronger glow for main title */
}

.sectionTitle::before {
  content: '';
  width: 4px;
  height: 20px;
  background: var(--primary);
  border-radius: 2px;
  box-shadow: 0 0 10px var(--primary); /* Glowing accent */
}

.taskGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  overflow-y: auto; /* Tasks grid scrolls independently */
  padding-right: 4px;
  flex: 1; /* Take remaining space */
  align-content: start;
  min-height: 0; /* Important for flex child to scroll */
}

.taskCard {
  display: flex;
  flex-direction: column;
  gap: 12px;
  /* Glassmorphism applied via Card component, but ensuring here too if needed */
  background: transparent; 
}

/* Enhancing the Card component wrapper styles if possible, 
   but assuming .taskCard is inside a Card component which might need its own styles updated.
   Ideally, we target the Card component class if we can, or just style the content here.
   If Card component has its own styles, we might need to override them or update Card.tsx.
   For now, let's assume Card component accepts className or we style the inner div.
*/

.taskTitle {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.taskMetaRow {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.taskDescription {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.taskTags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: auto;
}

.tag {
  font-size: 11px;
  color: var(--text-secondary);
  background: rgba(255, 255, 255, 0.05);
  padding: 2px 8px;
  border-radius: 4px;
  border: 1px solid var(--glass-border);
  transition: all calc(var(--duration-normal) * 1s) cubic-bezier(0.4, 0, 0.2, 1);
  transform-style: preserve-3d;
}

.tag:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--text-secondary);
  transform: translateY(-1px)
              rotateX(calc(var(--parallax-strength, 0) * 0.01deg)) 
              rotateY(calc(var(--parallax-strength, 0) * 0.01deg));
  box-shadow: 0 0 calc(var(--glow-strength, 50) * 0.1px) var(--glow-primary);
}

.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: var(--text-tertiary);
  font-style: italic;
}

.metaCount {
  font-size: 11px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 4px;
}

.metaProgressContainer {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
}

.metaProgressBar {
  width: 40px;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

:global([data-theme="light"]) .metaProgressBar {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.metaProgressFill {
  height: 100%;
  background: var(--success);
  box-shadow: 0 0 8px var(--success);
}

.metaProgressText {
  font-size: 10px;
  color: var(--text-tertiary);
}

